<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; Opqua 1.0.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=1ed6394b"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="Requirements and Installation" href="requirements_and_installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Opqua
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements_and_installation.html">Requirements and Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#minimal-example">Minimal example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-plots">Example Plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#population-genetic-composition-plots-for-pathogens">Population genetic composition plots for pathogens</a></li>
<li class="toctree-l3"><a class="reference internal" href="#host-vector-compartment-plots">Host/vector compartment plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plots-of-a-host-vector-compartment-across-different-populations-in-a-metapopulation">Plots of a host/vector compartment across different populations in a metapopulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Host/vector compartment plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pathogen-phylogenies">Pathogen phylogenies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_documentation.html"><code class="docutils literal notranslate"><span class="pre">Model</span></code> Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Opqua</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h1>
<p>To run any Opqua model (including the tutorials in the <code class="docutils literal notranslate"><span class="pre">examples/tutorials</span></code>
folder), save the model as a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file and execute from the console using
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">my_model.py</span></code>.</p>
<p>You may also run the models from a notebook environment
such as <a class="reference external" href="https://jupyter.org/">Jupyter</a> or an integrated development environment
(IDE) such as <a class="reference external" href="https://www.spyder-ide.org/">Spyder</a>, both available through
<a class="reference external" href="https://www.anaconda.com/distribution/">Anaconda</a>.</p>
<section id="minimal-example">
<h2>Minimal example<a class="headerlink" href="#minimal-example" title="Link to this heading"></a></h2>
<p>The simplest model you can make using Opqua looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This simulates a pathogen with genome &quot;AAAAAAAAAA&quot; spreading in a single</span>
<span class="c1"># population of 100 hosts, 20 of which are initially infected, under example</span>
<span class="c1"># preset conditions for host-host transmission.</span>

<span class="kn">from</span> <span class="nn">opqua.model</span> <span class="kn">import</span> <span class="n">Model</span>

<span class="n">my_model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">newSetup</span><span class="p">(</span><span class="s1">&#39;my_setup&#39;</span><span class="p">,</span> <span class="n">preset</span><span class="o">=</span><span class="s1">&#39;host-host&#39;</span><span class="p">)</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">newPopulation</span><span class="p">(</span><span class="s1">&#39;my_population&#39;</span><span class="p">,</span> <span class="s1">&#39;my_setup&#39;</span><span class="p">,</span> <span class="n">num_hosts</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">addPathogensToHosts</span><span class="p">(</span> <span class="s1">&#39;my_population&#39;</span><span class="p">,{</span><span class="s1">&#39;AAAAAAAAAA&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">}</span> <span class="p">)</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">my_model</span><span class="o">.</span><span class="n">saveToDataFrame</span><span class="p">(</span><span class="s1">&#39;my_model.csv&#39;</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">my_model</span><span class="o">.</span><span class="n">compartmentPlot</span><span class="p">(</span><span class="s1">&#39;my_model.png&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>For more example usage, have a look at the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder. For an overview
of how Opqua models work, check out the Materials and Methods section on the
manuscript
<a class="reference external" href="https://www.science.org/doi/10.1126/sciadv.abo0173">here</a>. A
summarized description is shown below in the
<strong>How Does Opqua Work?</strong> section.
For more information on the details of each function, head over to the
<strong>Documentation</strong> section.</p>
</section>
<section id="example-plots">
<h2>Example Plots<a class="headerlink" href="#example-plots" title="Link to this heading"></a></h2>
<p>These are some of the plots Opqua is able to produce, but you can output the
raw simulation data yourself to make your own analyses and plots. These are all
taken from the examples in the <code class="docutils literal notranslate"><span class="pre">examples/tutorials</span></code> folder—try them out
yourself! See the</p>
<section id="population-genetic-composition-plots-for-pathogens">
<h3>Population genetic composition plots for pathogens<a class="headerlink" href="#population-genetic-composition-plots-for-pathogens" title="Link to this heading"></a></h3>
<p>An optimal pathogen genome arises and outcompetes all others through intra-host
competition. See <code class="docutils literal notranslate"><span class="pre">fitness_function_mutation_example.py</span></code> in the
<code class="docutils literal notranslate"><span class="pre">examples/tutorials/evolution</span></code> folder.
<img alt="Compartments" src="_images/fitness_function_mutation_example_composition.png" /></p>
</section>
<section id="host-vector-compartment-plots">
<h3>Host/vector compartment plots<a class="headerlink" href="#host-vector-compartment-plots" title="Link to this heading"></a></h3>
<p>A population with natural birth and death dynamics shows the effects of a
pathogen. “Dead” denotes deaths caused by pathogen infection. See
<code class="docutils literal notranslate"><span class="pre">vector-borne_birth-death_example.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">examples/tutorials/vital_dynamics</span></code>
folder.
<img alt="Compartments" src="_images/vector-borne_birth-death_example.png" /></p>
</section>
<section id="plots-of-a-host-vector-compartment-across-different-populations-in-a-metapopulation">
<h3>Plots of a host/vector compartment across different populations in a metapopulation<a class="headerlink" href="#plots-of-a-host-vector-compartment-across-different-populations-in-a-metapopulation" title="Link to this heading"></a></h3>
<p>Pathogens spread through a network of interconnected populations of hosts. Lines
denote infected pathogens. See
<code class="docutils literal notranslate"><span class="pre">metapopulations_migration_example.py</span></code> in the
<code class="docutils literal notranslate"><span class="pre">examples/tutorials/metapopulations</span></code> folder.
<img alt="Compartments" src="_images/metapopulations_migration_example.png" /></p>
</section>
<section id="id1">
<h3>Host/vector compartment plots<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>A population undergoes different interventions, including changes in
epidemiological parameters and vaccination. “Recovered” denotes immunized,
uninfected hosts.
See <code class="docutils literal notranslate"><span class="pre">intervention_examples.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">examples/tutorials/interventions</span></code> folder.
<img alt="Compartments" src="_images/intervention_examples_compartments.png" /></p>
</section>
<section id="pathogen-phylogenies">
<h3>Pathogen phylogenies<a class="headerlink" href="#pathogen-phylogenies" title="Link to this heading"></a></h3>
<p>Phylogenies can be computed for pathogen genomes that emerge throughout the
simulation. See <code class="docutils literal notranslate"><span class="pre">fitness_function_mutation_example.py</span></code> in the
<code class="docutils literal notranslate"><span class="pre">examples/tutorials/evolution</span></code> folder.
<img alt="Compartments" src="_images/fitness_function_mutation_example_clustermap.png" /></p>
<p>For advanced examples (including multiple parameter sweeps), check out
<a class="reference external" href="https://github.com/pablocarderam/fitness-valleys-opqua">this separate repository</a>
(preprint forthcoming).</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="requirements_and_installation.html" class="btn btn-neutral float-left" title="Requirements and Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Pablo Cárdenas.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>